import{v as S,x as V,y as L,_ as B,r as c,p as N,f as T,c as _,z as h,b as g,a as v,q as m,w as y,s as k,F as E,u as A,A as I,B as R,C as $,o as p}from"./BunUn4iA.js";import{a as F,C as K}from"./DnLLduGQ.js";import{p as w,g as b}from"./C3hSVrK0.js";import{T as M}from"./H5OyosYD.js";import{C as P}from"./CFafXxLi.js";import"./BWueSjaD.js";const X="$s";function j(...n){const d=typeof n[n.length-1]=="string"?n.pop():void 0;typeof n[0]!="string"&&n.unshift(d);const[r,a]=n;if(!r||typeof r!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+r);if(a!==void 0&&typeof a!="function")throw new Error("[nuxt] [useState] init must be a function: "+a);const f=X+r,o=S(),l=V(o.payload.state,f);if(l.value===void 0&&a){const s=a();if(L(s))return o.payload.state[f]=s,s;l.value=s}return l}const q={key:0},z={class:"center-text"},D={class:"center-text"},H={__name:"[chapter_string]",setup(n){const d=A(),r=async()=>{console.log("fd");const i=w(d.params.chapter_string);if(a.value=w(d.params.chapter_string)[0],console.log("xx",a),i.length!=1){x.value=i;return}try{{const e=await(await I(i)).data;e.length&&(o.value=e[0],console.log(o.tags))}{const e=await(await R(parseInt(i[0].book),parseInt(i[0].chapter))).data;s.value=e.prev?b(e.prev.book,e.prev.chapter):null,l.value=e.next?b(e.next.book,e.next.chapter):null,console.log("fetched meta")}}catch(t){console.error("XX Error fetching data:",t)}};c({book:1,chapter:1});const a=c({book:1,chapter:1});N(async()=>{await r()});const f=c({book:1,chapter:1});T(()=>d.params.chapter_string,async(i,t)=>{console.log("co",f),await r()});const o=c(null),l=c("next"),s=c("prev"),x=c([]),u=j("show_tags",()=>!1);return(i,t)=>{const e=$("router-link");return p(),_(E,null,[o.value?(p(),_("div",q,[v("div",z,[s.value?(p(),m(e,{key:0,to:s.value},{default:y(()=>t[2]||(t[2]=[v("div",{class:"bordered-link"},"Prev",-1)])),_:1},8,["to"])):h("",!0),l.value?(p(),m(e,{key:1,to:l.value},{default:y(()=>t[3]||(t[3]=[v("div",{class:"bordered-link"},"Next",-1)])),_:1},8,["to"])):h("",!0)]),g(F,{p_data:o.value},null,8,["p_data"]),v("div",D,[k(u)?(p(),_("div",{key:0,class:"bordered-link",onClick:t[0]||(t[0]=C=>u.value=!k(u))},"Hide Tags")):(p(),_("div",{key:1,class:"bordered-link",onClick:t[1]||(t[1]=C=>u.value=!k(u))},"Show Tags")),t[4]||(t[4]=v("div",{class:"bordered-link"},"Show Collections",-1))]),k(u)?(p(),m(M,{key:0,tag_list:o.value.tags},null,8,["tag_list"])):h("",!0),g(P,{chapterLoc:a.value},null,8,["chapterLoc"])])):h("",!0),g(K,{chapter_list:x.value},null,8,["chapter_list"])],64)}}},Y=B(H,[["__scopeId","data-v-03c24b05"]]);export{Y as default};
