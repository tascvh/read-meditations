import{_ as N}from"./BWueSjaD.js";import{_ as x,r as _,p as I,D as k,c as o,o as a,a as u,F as O,m as J,z as i,b as V,w,t as T,E as A,G as B}from"./BunUn4iA.js";const D={key:0},F={key:0,class:"badge badge-primary"},$={key:1},E={key:0},M=["onClick"],j={key:1},z=["onClick"],G={class:"bordered-link"},H={key:0,class:"xx"},U={key:1},q={__name:"Collections",props:{chapterLoc:{type:Object,default:null}},setup(d){const c=d,l=_(""),s=_([]);I(()=>{y()});const m=e=>"/collections/"+e,p=k(()=>c.chapterLoc.book),h=k(()=>c.chapterLoc.chapter),g=()=>{const e=l.value.trim();if(e===""||s.value.includes(e)){l.value="";return}s.value.push(e),b(),l.value=""},b=()=>{localStorage.setItem("collectionNames",JSON.stringify(s.value))},y=()=>{{const e=localStorage.getItem("collectionNames");s.value=e?JSON.parse(e):[]}},v=e=>(console.log(e,"has chapter",p.value,h.value),(JSON.parse(localStorage.getItem(e))||[]).some(r=>r.book==p.value&&r.chapter==h.value)),C=e=>{if(!c.chapterLoc)return;const t=JSON.parse(localStorage.getItem(e))||[];t.push(c.chapterLoc),localStorage.setItem(e,JSON.stringify(t)),s.value=[...s.value]},S=e=>{if(!c.chapterLoc)return;let t=JSON.parse(localStorage.getItem(e))||[];t=t.filter(r=>!(r.book===c.chapterLoc.book&&r.chapter===c.chapterLoc.chapter)),localStorage.setItem(e,JSON.stringify(t)),s.value=[...s.value]};return(e,t)=>{const r=N;return a(),o("div",null,[(a(!0),o(O,null,J(s.value,(n,L)=>(a(),o("div",{key:L},[d.chapterLoc?(a(),o("div",D,[v(n)?(a(),o("span",F,"Added")):i("",!0)])):i("",!0),d.chapterLoc?(a(),o("span",$,[v(n)?(a(),o("span",E,[u("button",{class:"button button-secondary",onClick:f=>S(n)},"-",8,M)])):(a(),o("span",j,[u("button",{class:"button button-secondary",onClick:f=>C(n)},"+",8,z)]))])):i("",!0),V(r,{to:m(n)},{default:w(()=>[u("span",G,T(n),1)]),_:2},1032,["to"])]))),128)),t[2]||(t[2]=u("ul",null,null,-1)),l.value.length?(a(),o("div",H,[A(u("input",{class:"input","onUpdate:modelValue":t[0]||(t[0]=n=>l.value=n),placeholder:"Type a string..."},null,512),[[B,l.value]]),u("button",{class:"button button-primary",onClick:g},"Add")])):(a(),o("div",U,[u("span",{class:"bordered-link",onClick:t[1]||(t[1]=n=>l.value="new-collection")},"Add new collection ")]))])}}},Q=x(q,[["__scopeId","data-v-d46798fb"]]);export{Q as C};
