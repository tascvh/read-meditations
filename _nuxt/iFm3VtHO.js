import{_ as z}from"./B6PdMA8h.js";import{_ as M,r as L,p as H,D as h,c as s,o as a,a as t,s as S,z as T,E as x,G as y,d,F as g,m as N,t as m,b as D,w as E,H as F}from"./CAsyAixT.js";import{a as j}from"./DL6YdULe.js";const A={key:0},U={class:"card"},G={class:"add-collection-form"},$={key:0,class:"collections-container"},q={class:"collection-card"},K={class:"flex items-center justify-between mb-2"},P={key:0},Q={class:"item-count"},R={key:1},W={key:1},X={class:"card"},Y={class:"add-collection-form"},Z=["onClick"],ee={key:0,class:"add-button"},te={key:1,class:"remove-button"},oe={__name:"Collections",props:{chapterLoc:{type:Object,default:null}},setup(b){const r=b,c=L(""),n=L([]);H(()=>{O()});const w=h(()=>r.chapterLoc==null),V=o=>{var e=j(JSON.parse(localStorage.getItem(o))||[]);return e+="?coll="+o,e},f=h(()=>r.chapterLoc.book),C=h(()=>r.chapterLoc.chapter),_=()=>{const o=c.value.trim();if(o!==""){if(n.value.includes(o)){p(o),c.value="";return}n.value.push(o),I(),p(o),c.value=""}},I=()=>{localStorage.setItem("collectionNames",JSON.stringify(n.value))},O=()=>{{const o=localStorage.getItem("collectionNames");n.value=o?JSON.parse(o):[]}},u=o=>(console.log(o,"has chapter",f.value,C.value),(JSON.parse(localStorage.getItem(o))||[]).some(i=>i.book==f.value&&i.chapter==C.value)),p=o=>{r.chapterLoc&&(u(o)?B(o):J(o))},k=o=>(JSON.parse(localStorage.getItem(o))||[]).length,J=o=>{if(!r.chapterLoc)return;const e=JSON.parse(localStorage.getItem(o))||[];e.push(r.chapterLoc),localStorage.setItem(o,JSON.stringify(e)),n.value=[...n.value]},B=o=>{if(!r.chapterLoc)return;let e=JSON.parse(localStorage.getItem(o))||[];e=e.filter(i=>!(i.book===r.chapterLoc.book&&i.chapter===r.chapterLoc.chapter)),localStorage.setItem(o,JSON.stringify(e)),n.value=[...n.value]};return(o,e)=>{const i=z;return a(),s(g,null,[S(w)?(a(),s("div",A,[t("div",U,[t("div",G,[x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>c.value=l),type:"text",class:"add-collection-input",placeholder:"New collection name..."},null,512),[[y,c.value]]),t("button",{onClick:_,class:"add-collection-button"},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",width:"14",height:"14"},[t("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),d(" Add ")]))]),S(w)?(a(),s("div",$,[(a(!0),s(g,null,N(n.value,(l,v)=>(a(),s("div",{class:"collections-row",key:v},[t("div",q,[t("div",K,[t("h4",null,m(l),1)]),k(l)?(a(),s("div",P,[t("span",Q,m(k(l))+" Chapter(s)",1),D(i,{to:V(l)},{default:E(()=>e[3]||(e[3]=[t("span",{href:"#",class:"collection-link"},[d(" View collection "),t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1)])),_:2},1032,["to"])])):(a(),s("div",R,e[4]||(e[4]=[t("span",{class:"item-count"},"Empty",-1)])))])]))),128))])):T("",!0)])])):(a(),s("div",W,[t("div",X,[t("h3",null,[e[6]||(e[6]=d(" Collections ")),t("div",Y,[x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>c.value=l),type:"text",class:"add-collection-input",placeholder:"New collection name..."},null,512),[[y,c.value]]),t("button",{onClick:_,class:"add-collection-button"},e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",width:"14",height:"14"},[t("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),d(" Add ")]))])]),t("div",null,[(a(!0),s(g,null,N(n.value,(l,v)=>(a(),s("div",{key:v,class:F(["collection-pill",{active:u(l)}]),onClick:le=>p(l)},[t("span",null,m(l),1),u(l)?(a(),s("div",te,e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",width:"16",height:"16"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))):(a(),s("div",ee,e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",width:"16",height:"16"},[t("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)])))],10,Z))),128))])])])),e[9]||(e[9]=t("div",null,null,-1))],64)}}},re=M(oe,[["__scopeId","data-v-81b16ffa"]]);export{re as C};
